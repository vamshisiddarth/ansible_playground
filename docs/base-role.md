Now, we have instance ready to use, let's prepare the instance with all required dependencies which include installation and configuration of zsh, monit and etc.

### Bastion Playbook
Before executing the playbook, let's take a moment and understand what exactly is configured in the playbook.

```yaml
- name: dev bastion
  # Hostname configured as per Dynamic Inventory
  # You can understand more about this by executing ansible inventory command(ansible-inventory --list)
  hosts: tag_project_dev_bastion

  # User to run the playbook on the remote instance
  remote_user: ubuntu
  become: true

  # All the roles that we wish to execute on the remote instance
  # The roles declared here will be executed. Ansible will search for the roles under roles directory.
  # This is configured in ansible.cfg file
  roles:
    - { role: base,           tags: [ 'base' ] }
    - { role: monit,          tags: [ 'monit'] }
```

### Execution
To execute the playbook, run the below command. Wait until the execution is completed and check for any errors.

```sh
$ ansible-playbook dev-bastion.yml
```

??? Output
    You should find the output similar to below.
    ```
    PLAY [dev bastion] *****************************************************************************************************************************************************************************************************
    
    TASK [common : dpkg --configure -a] ************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:57:42 +0400 (0:00:00.070)       0:00:00.070 ***** 
    changed: [172.16.10.120]
    
    TASK [common : install system pakcages and utils] **********************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:57:44 +0400 (0:00:02.013)       0:00:02.083 ***** 
    ok: [172.16.10.120]
    
    TASK [common : correct python version selected] ************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:57:49 +0400 (0:00:04.600)       0:00:06.683 ***** 
    ok: [172.16.10.120]
    
    TASK [common : install pip packages ( aws .. )] ************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:57:51 +0400 (0:00:02.412)       0:00:09.095 ***** 
    ok: [172.16.10.120]
    
    TASK [common : enable /etc/default/sysstat] ****************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:57:57 +0400 (0:00:05.913)       0:00:15.008 ***** 
    ok: [172.16.10.120]
    
    TASK [common : set sysctl values] **************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:57:59 +0400 (0:00:01.478)       0:00:16.487 ***** 
    ok: [172.16.10.120] => (item={'name': 'net.core.somaxconn', 'value': 65535})
    ok: [172.16.10.120] => (item={'name': 'net.ipv4.tcp_max_syn_backlog', 'value': 65535})
    ok: [172.16.10.120] => (item={'name': 'net.ipv4.tcp_fin_timeout', 'value': 20})
    ok: [172.16.10.120] => (item={'name': 'net.ipv4.tcp_max_tw_buckets', 'value': 1440000})
    ok: [172.16.10.120] => (item={'name': 'vm.overcommit_memory', 'value': 1})
    ok: [172.16.10.120] => (item={'name': 'vm.vfs_cache_pressure', 'value': 60})
    ok: [172.16.10.120] => (item={'name': 'vm.max_map_count', 'value': 262144})
    ok: [172.16.10.120] => (item={'name': 'fs.file-max', 'value': 1000000})
    ok: [172.16.10.120] => (item={'name': 'kernel.pid_max', 'value': 65536})
    ok: [172.16.10.120] => (item={'name': 'net.ipv4.ip_local_port_range', 'value': '10000 65535'})
    ok: [172.16.10.120] => (item={'name': 'net.ipv4.udp_rmem_min', 'value': 8192})
    ok: [172.16.10.120] => (item={'name': 'net.ipv4.udp_wmem_min', 'value': 8192})
    ok: [172.16.10.120] => (item={'name': 'net.ipv4.tcp_syncookies', 'value': 1})
    ok: [172.16.10.120] => (item={'name': 'fs.nr_open', 'value': 10485760})
    
    TASK [common : configure max open file number limits] ******************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:10 +0400 (0:00:11.748)       0:00:28.235 ***** 
    ok: [172.16.10.120] => (item={'domain': '*', 'type': 'soft', 'name': 'memlock', 'value': 'unlimited'})
    ok: [172.16.10.120] => (item={'domain': '*', 'type': 'hard', 'name': 'memlock', 'value': 'unlimited'})
    ok: [172.16.10.120] => (item={'domain': '*', 'type': 'soft', 'name': 'nofile', 'value': '1000000'})
    ok: [172.16.10.120] => (item={'domain': '*', 'type': 'hard', 'name': 'nofile', 'value': '1000000'})
    ok: [172.16.10.120] => (item={'domain': '*', 'type': 'soft', 'name': 'nproc', 'value': '1000000'})
    ok: [172.16.10.120] => (item={'domain': '*', 'type': 'hard', 'name': 'nproc', 'value': '1000000'})
    
    TASK [common : disable kernel.mm.transparent_hugepage debian] **********************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:15 +0400 (0:00:04.965)       0:00:33.200 ***** 
    ok: [172.16.10.120]
    
    TASK [common : disable kernel.mm.transparent_hugepage redhat] **********************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:19 +0400 (0:00:03.344)       0:00:36.544 ***** 
    skipping: [172.16.10.120]
    
    TASK [common : Disable Transparent Huge Pages until reboot] ************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:19 +0400 (0:00:00.040)       0:00:36.585 ***** 
    changed: [172.16.10.120]
    
    TASK [common : install git and zsh debian] *****************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:20 +0400 (0:00:00.812)       0:00:37.398 ***** 
    ok: [172.16.10.120]
    
    TASK [common : install git and zsh redhat] *****************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:21 +0400 (0:00:01.704)       0:00:39.102 ***** 
    skipping: [172.16.10.120]
    
    TASK [common : clone oh-my-zsh repo] ***********************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:21 +0400 (0:00:00.039)       0:00:39.142 ***** 
    ok: [172.16.10.120] => (item={'name': 'https://github.com/robbyrussell/oh-my-zsh', 'dir': 'oh-my-zsh'})
    ok: [172.16.10.120] => (item={'name': 'https://github.com/zsh-users/zsh-syntax-highlighting', 'dir': 'zsh-syntax-highlighting'})
    ok: [172.16.10.120] => (item={'name': 'git://github.com/zsh-users/zsh-autosuggestions', 'dir': 'zsh-autosuggestions'})
    
    TASK [common : create conf folder in home directory] *******************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:29 +0400 (0:00:07.820)       0:00:46.963 ***** 
    ok: [172.16.10.120] => (item=/usr/local/share/oh-my-zsh/conf/)
    ok: [172.16.10.120] => (item=/usr/local/share/oh-my-zsh/cache/)
    
    TASK [common : deploy .zshrc] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:31 +0400 (0:00:01.830)       0:00:48.794 ***** 
    ok: [172.16.10.120]
    
    TASK [common : deploy .extra] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:34 +0400 (0:00:03.172)       0:00:51.967 ***** 
    ok: [172.16.10.120]
    
    TASK [common : deploy .aliases] ****************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:37 +0400 (0:00:03.212)       0:00:55.180 ***** 
    ok: [172.16.10.120]
    
    TASK [common : deploy .bash_profile] ***********************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:41 +0400 (0:00:03.178)       0:00:58.358 ***** 
    ok: [172.16.10.120]
    
    TASK [common : remove standard zshrc] **********************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:44 +0400 (0:00:03.064)       0:01:01.422 ***** 
    changed: [172.16.10.120]
    
    TASK [common : symlink zshrc] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:44 +0400 (0:00:00.831)       0:01:02.254 ***** 
    changed: [172.16.10.120]
    
    TASK [common : Update pamd rule's control in /etc/pam.d/chsh] **********************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:45 +0400 (0:00:00.824)       0:01:03.079 ***** 
    ok: [172.16.10.120]
    
    TASK [common : set zsh as default shell] *******************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:46 +0400 (0:00:01.016)       0:01:04.095 ***** 
    changed: [172.16.10.120]
    
    TASK [common : install git and zsh debian] *****************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:47 +0400 (0:00:00.822)       0:01:04.917 ***** 
    ok: [172.16.10.120]
    
    TASK [common : install git and zsh redhat] *****************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:49 +0400 (0:00:01.667)       0:01:06.584 ***** 
    skipping: [172.16.10.120]
    
    TASK [common : clone oh-my-zsh repo] ***********************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:49 +0400 (0:00:00.035)       0:01:06.620 ***** 
    ok: [172.16.10.120] => (item={'name': 'https://github.com/robbyrussell/oh-my-zsh', 'dir': 'oh-my-zsh'})
    ok: [172.16.10.120] => (item={'name': 'https://github.com/zsh-users/zsh-syntax-highlighting', 'dir': 'zsh-syntax-highlighting'})
    ok: [172.16.10.120] => (item={'name': 'git://github.com/zsh-users/zsh-autosuggestions', 'dir': 'zsh-autosuggestions'})
    
    TASK [common : create conf folder in home directory] *******************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:55 +0400 (0:00:06.607)       0:01:13.228 ***** 
    ok: [172.16.10.120] => (item=/usr/local/share/oh-my-zsh/conf/)
    ok: [172.16.10.120] => (item=/usr/local/share/oh-my-zsh/cache/)
    
    TASK [common : deploy .zshrc] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:58:57 +0400 (0:00:01.600)       0:01:14.828 ***** 
    ok: [172.16.10.120]
    
    TASK [common : deploy .extra] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:00 +0400 (0:00:03.162)       0:01:17.990 ***** 
    ok: [172.16.10.120]
    
    TASK [common : deploy .aliases] ****************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:03 +0400 (0:00:03.191)       0:01:21.181 ***** 
    ok: [172.16.10.120]
    
    TASK [common : deploy .bash_profile] ***********************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:06 +0400 (0:00:03.006)       0:01:24.187 ***** 
    ok: [172.16.10.120]
    
    TASK [common : remove standard zshrc] **********************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:10 +0400 (0:00:03.192)       0:01:27.380 ***** 
    changed: [172.16.10.120]
    
    TASK [common : symlink zshrc] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:10 +0400 (0:00:00.824)       0:01:28.205 ***** 
    changed: [172.16.10.120]
    
    TASK [common : Update pamd rule's control in /etc/pam.d/chsh] **********************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:11 +0400 (0:00:00.969)       0:01:29.175 ***** 
    ok: [172.16.10.120]
    
    TASK [common : set zsh as default shell] *******************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:12 +0400 (0:00:00.806)       0:01:29.981 ***** 
    changed: [172.16.10.120]
    
    TASK [common : transfer ssh config /etc/ssh/ssh_config] ****************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:13 +0400 (0:00:00.811)       0:01:30.792 ***** 
    ok: [172.16.10.120]
    
    TASK [ensure monit installed] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:16 +0400 (0:00:02.997)       0:01:33.790 ***** 
    ok: [172.16.10.120]
    
    TASK [monit : Download EPEL Repo] **************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:18 +0400 (0:00:01.931)       0:01:35.721 ***** 
    skipping: [172.16.10.120]
    
    TASK [ensure monit installed] ******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:18 +0400 (0:00:00.040)       0:01:35.762 ***** 
    skipping: [172.16.10.120]
    
    TASK [get monit version] ***********************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:18 +0400 (0:00:00.041)       0:01:35.803 ***** 
    changed: [172.16.10.120]
    
    TASK [set monit version] ***********************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:19 +0400 (0:00:00.816)       0:01:36.620 ***** 
    ok: [172.16.10.120]
    
    TASK [stop monit] ******************************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:19 +0400 (0:00:00.046)       0:01:36.667 ***** 
    skipping: [172.16.10.120]
    
    TASK [monit dirs] ******************************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:19 +0400 (0:00:00.043)       0:01:36.711 ***** 
    ok: [172.16.10.120] => (item=/var/monit/)
    ok: [172.16.10.120] => (item=//var/lib/monit/)
    ok: [172.16.10.120] => (item=/etc/monit/)
    
    TASK [/var/lib/monit/ dir] *********************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:21 +0400 (0:00:02.555)       0:01:39.267 ***** 
    skipping: [172.16.10.120] => (item=/etc/monit/conf.d/) 
    skipping: [172.16.10.120] => (item=/var/lib/monit/) 
    
    TASK [download and unzip monit] ****************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:21 +0400 (0:00:00.048)       0:01:39.316 ***** 
    skipping: [172.16.10.120]
    
    TASK [download and unzip monit] ****************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:22 +0400 (0:00:00.034)       0:01:39.350 ***** 
    skipping: [172.16.10.120]
    
    TASK [monit bin] *******************************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:22 +0400 (0:00:00.041)       0:01:39.392 ***** 
    skipping: [172.16.10.120]
    
    TASK [transfer monit config /etc/monit/monitrc] ************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:22 +0400 (0:00:00.044)       0:01:39.436 ***** 
    ok: [172.16.10.120]
    
    TASK [transfer monit config /etc/monitrc] ******************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:25 +0400 (0:00:03.049)       0:01:42.486 ***** 
    ok: [172.16.10.120]
    
    TASK [transfer monit id /var/lib/monit/id] *****************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:28 +0400 (0:00:03.181)       0:01:45.667 ***** 
    ok: [172.16.10.120]
    
    TASK [transfer monit-config configuration] *****************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:31 +0400 (0:00:03.020)       0:01:48.688 ***** 
    ok: [172.16.10.120] => (item=/Users/vamshisiddarthgaddam/workspace/ansible_playground/roles/monit/tasks/../templates/monit/conf.d/sshd.conf)
    ok: [172.16.10.120] => (item=/Users/vamshisiddarthgaddam/workspace/ansible_playground/roles/monit/tasks/../templates/monit/conf.d/system.conf)
    ok: [172.16.10.120] => (item=/Users/vamshisiddarthgaddam/workspace/ansible_playground/roles/monit/tasks/../templates/monit/conf.d/filebeat.conf)
    ok: [172.16.10.120] => (item=/Users/vamshisiddarthgaddam/workspace/ansible_playground/roles/monit/tasks/../templates/monit/conf.d/filesystem.conf)
    
    TASK [ensure monit reloaded] *******************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:43 +0400 (0:00:12.102)       0:02:00.790 ***** 
    changed: [172.16.10.120]
    
    RUNNING HANDLER [reload monit] *****************************************************************************************************************************************************************************************
    Wednesday 27 January 2021  17:59:44 +0400 (0:00:00.811)       0:02:01.602 ***** 
    changed: [172.16.10.120]
    
    PLAY RECAP *************************************************************************************************************************************************************************************************************
    172.16.10.120              : ok=42   changed=11   unreachable=0    failed=0    skipped=10   rescued=0    ignored=0   
    
    Wednesday 27 January 2021  17:59:45 +0400 (0:00:01.330)       0:02:02.932 ***** 
    =============================================================================== 
    transfer monit-config configuration ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 12.10s
    common : set sysctl values ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 11.75s
    common : clone oh-my-zsh repo ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 7.82s
    common : clone oh-my-zsh repo ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 6.61s
    common : install pip packages ( aws .. ) ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 5.91s
    common : configure max open file number limits ------------------------------------------------------------------------------------------------------------------------------------------------------------------ 4.97s
    common : install system pakcages and utils ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- 4.60s
    common : disable kernel.mm.transparent_hugepage debian ---------------------------------------------------------------------------------------------------------------------------------------------------------- 3.34s
    common : deploy .extra ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 3.21s
    common : deploy .bash_profile ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.19s
    common : deploy .extra ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 3.19s
    transfer monit config /etc/monitrc ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 3.18s
    common : deploy .aliases ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.18s
    common : deploy .zshrc ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 3.17s
    common : deploy .zshrc ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 3.16s
    common : deploy .bash_profile ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.06s
    transfer monit config /etc/monit/monitrc ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ 3.05s
    transfer monit id /var/lib/monit/id ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.02s
    common : deploy .aliases ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.01s
    common : transfer ssh config /etc/ssh/ssh_config ---------------------------------------------------------------------------------------------------------------------------------------------------------------- 3.00s
    ```

!!! warning
    Check the output and verify there are no errors that is interrupting the playbook from executing all the tasks. Fix all the errors when found.